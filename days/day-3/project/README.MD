# Student wall ğŸ¨ / ç”Ÿå¾’ç”¨ã‚¦ã‚©ãƒ¼ãƒ« ğŸ¨
It was your third day at Motoko School, and you were determined to start making some good friends.  
Motoko ã‚¹ã‚¯ãƒ¼ãƒ«ã«å…¥å­¦ã—ã¦ï¼“æ—¥ç›®ã®ã‚ãªãŸã¯ã€ãã‚ãã‚ã„ã„å‹é”ã‚’ä½œã‚ã†ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚<br/>
Being a big fan of music, you thought organizing a little music concert could be a great way to meet other like-minded students. ğŸ¶  
éŸ³æ¥½ãŒå¤§å¥½ããªã‚ãªãŸã¯ã€å°ã•ãªéŸ³æ¥½ä¼šã‚’ä¼ç”»ã™ã‚‹ã“ã¨ã§ã€åŒã˜å¿—ã‚’æŒã¤ç”Ÿå¾’ãŸã¡ã¨çŸ¥ã‚Šåˆã†ã“ã¨ãŒã§ãã‚‹ã¨è€ƒãˆã¾ã—ãŸã€‚ğŸ¶

As you wandered the halls during lunchtime, you overheard two students discussing how they wished there was a better way to stay informed about school events and activities. They complained about how they had missed out on attending the previous year's [ICP Community Conference](https://twitter.com/icp_cc) because they weren't aware of it in time, and how they were determined not to let that happen again this year. ğŸ’ª  
æ˜¼ä¼‘ã¿ã«å»Šä¸‹ã‚’æ­©ã„ã¦ã„ã‚‹ã¨ã€ï¼’äººã®ç”Ÿå¾’ãŒã€Œå­¦æ ¡ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚„æ´»å‹•ã«ã¤ã„ã¦ã‚‚ã£ã¨æƒ…å ±ã‚’å¾—ã‚‹æ–¹æ³•ãŒã‚ã‚Œã°ã„ã„ã®ã«ã€ã¨è©±ã—ã¦ã„ã‚‹ã®ã‚’è€³ã«ã—ã¾ã—ãŸã€‚å½¼ã‚‰ã¯ã€å‰å¹´åº¦ã® [ICP Community Conference](https://twitter.com/icp_cc) ã«æ°—ã¥ã‹ãšå‚åŠ ã§ããªã‹ã£ãŸã“ã¨ã‚’è¨´ãˆã€ä»Šå¹´ã‚‚åŒã˜ã“ã¨ãŒèµ·ã“ã‚‰ãªã„ã‚ˆã†ã«ã—ã‚ˆã†ã¨æ±ºæ„ã—ã¦ã„ã¾ã—ãŸã€‚ğŸ’ª


This sparked an idea in your mind.  
ã“ã‚ŒãŒã€ã‚ãªãŸã®å¿ƒã«ã‚ã‚‹ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‘¼ã³èµ·ã“ã—ã¾ã—ãŸã€‚<br/>

What if you could create a digital platform where students share upcoming events and activities. It would be the perfect way to advertise your music concert and help other students stay informed about everything happening on campus. ğŸ“…  
ã‚‚ã—ã€ç”Ÿå¾’ãŒä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆã‚„æ´»å‹•ã‚’å…±æœ‰ã™ã‚‹ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œã‚‹ã“ã¨ãŒã§ããŸã‚‰ã©ã†ã§ã—ã‚‡ã†ã€‚éŸ³æ¥½ã‚³ãƒ³ã‚µãƒ¼ãƒˆã‚’å®£ä¼ã—ãŸã‚Šã€ä»–ã®ç”Ÿå¾’ãŒã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã§èµ·ã“ã£ã¦ã„ã‚‹ã™ã¹ã¦ã®ã“ã¨ã‚’çŸ¥ã‚‹ã®ã«æœ€é©ãªæ–¹æ³•ã§ã™ã€‚ğŸ“…

You quickly shared your idea with the two students and they loved it. They introduced you to a few others who were also interested in the idea, and before you knew it, you had a group of motivated students ready to bring your idea to life. ğŸš€  
ã‚ãªãŸã¯æ—©é€Ÿã€ãã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ï¼’äººã®ç”Ÿå¾’ã«ä¼ãˆã¾ã—ãŸã€‚ãã—ã¦ã€ãã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å®Ÿç¾ã—ã‚ˆã†ã¨ã™ã‚‹æ„æ¬²çš„ãªç”Ÿå¾’ãŸã¡ãŒã€ã„ã¤ã®é–“ã«ã‹é›†ã¾ã£ã¦ããŸã®ã§ã™ã€‚ğŸš€

You all gathered in the computer lab and began brainstorming the features of your student wall. You wanted it to be more than just a bulletin board, so you came up with the idea to include images and surveys as well. You divided the work and got started coding.  
çš†ã•ã‚“ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿å®¤ã«é›†ã¾ã‚Šã€ç”Ÿå¾’ç”¨ã‚¦ã‚©ãƒ¼ãƒ«ã®ç‰¹å¾´ã‚’è€ƒãˆå§‹ã‚ã¾ã—ãŸã€‚å˜ãªã‚‹æ²ç¤ºæ¿ã«ã¨ã©ã¾ã‚‰ãšã€ç”»åƒã‚„ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚‚å–ã‚Šå…¥ã‚Œã‚‹ã“ã¨ã‚’æ€ã„ã¤ã„ãŸã®ã§ã™ã€‚ä½œæ¥­ã‚’åˆ†æ‹…ã—ã¦ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚

## ğŸ§‘â€ğŸ« Requirements å‰ææ¡ä»¶
Your task is to develop the code for a student wall, implemented as a canister - a digital platform that will revolutionize how students communicate and stay informed about events, clubs, and activities in the community. Imagine a dynamic and interactive space where students can share their thoughts, ideas, and upcoming events with each other. 
This wall will be the go-to destination for students looking to get the latest scoop on what's happening in the school. 

ã‚ãªãŸã®ä»•äº‹ã¯ã€ã‚­ãƒ£ãƒ‹ã‚¹ã‚¿ãƒ¼ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã‚‹ç”Ÿå¾’ã‚¦ã‚©ãƒ¼ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã®ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯ã€ç”Ÿå¾’ãŒã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚¯ãƒ©ãƒ–ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã®æ´»å‹•ã«ã¤ã„ã¦ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã¨ã‚Šã€æƒ…å ±ã‚’å¾—ã‚‹æ–¹æ³•ã«é©å‘½ã‚’ã‚‚ãŸã‚‰ã™ã§ã—ã‚‡ã†ã€‚ç”Ÿå¾’ãŒè‡ªåˆ†ã®è€ƒãˆã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã€ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆãªã©ã‚’å…±æœ‰ã§ãã‚‹ã€ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªç©ºé–“ã‚’æƒ³åƒã—ã¦ãã ã•ã„ã€‚
ã“ã®å£ã¯ã€å­¦æ ¡ã§èµ·ã“ã£ã¦ã„ã‚‹ã“ã¨ã®æœ€æ–°ã‚¹ã‚¯ãƒ¼ãƒ—ã‚’å¾—ãŸã„ç”Ÿå¾’ã«ã¨ã£ã¦ã€æœ€ã‚‚é‡è¦ãªå ´æ‰€ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚

## ğŸ“’ Steps / ã‚¹ãƒ†ãƒƒãƒ—
We define a variant type called `Content` that represents the type of content of the messages that can be published on the wall.  
ã‚¦ã‚©ãƒ¼ãƒ«ã«å…¬é–‹ã§ãã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã®ç¨®é¡ã‚’è¡¨ã™ `Content` ã¨ã„ã†ãƒãƒªã‚¢ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’å®šç¾©ã—ã¾ã™ã€‚
```motoko
public type Content = {
    #Text: Text;
    #Image: Blob;
    #Video: Blob;
};
```
1. Define a new type called `Message` which consists of three fields: `vote` of type `Int`, `content` of type `Content`, and `creator` of type `Principal`. / 3ã¤ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹ `Message` ã¨ã„ã†æ–°ã—ã„å‹ã‚’å®šç¾©ã—ãªã•ã„ï¼š ã“ã®å‹ã¯ã€ `Int` å‹ã® `vote` ã€ `Content` å‹ã® `content` ã€ `Principal` å‹ã® `creator` ã® 3 ã¤ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚

2. Declare a variable named `messageId` to serve as a continuously increasing counter, keeping track of the total number of messages posted. / æŠ•ç¨¿ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·æ•°ã‚’è¿½è·¡ã—ã€ç¶™ç¶šçš„ã«å¢—åŠ ã™ã‚‹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ `messageId` ã¨ã„ã†åå‰ã®å¤‰æ•°ã‚’å®£è¨€ã—ã¾ã™ã€‚

3. Create a variable called `wall`, which is a HashMap designed to store messages. The keys in the wall are of type `Nat` and represent message IDs, while the values are of type `Message`. / ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã® HashMap ã§ã‚ã‚‹ `wall` ã¨ã„ã†å¤‰æ•°ã‚’ä½œæˆã—ãªã•ã„ã€‚wall ã®ã‚­ãƒ¼ã¯ `Nat` å‹ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ ID ã‚’è¡¨ã—ã€å€¤ã¯ `Message` å‹ã§ã™ã€‚

4. Implement the `writeMessage` function, which accepts a content `c` of type `Content`, creates a new message from the content, adds the message to the wall, and returns the ID of the message.  
`Content`å‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ `c` ã‚’å—ã‘å–ã‚Šã€ãã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆã—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ wall ã«è¿½åŠ ã—ã¦ã€ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã® ID ã‚’è¿”ã™ `writeMessage` é–¢æ•°ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚
```motoko
writeMessage: shared (c : Content) -> async Nat;
```
5. Implement the `getMessage` function, which accepts a `messageId` of type `Nat` and returns the corresponding message wrapped in an `Ok` result. If the `messageId` is invalid, the function should return an error message wrapped in an `Err` result.  
`Nat`å‹ã® `messageId` ã‚’å—ã‘å–ã‚Šã€å¯¾å¿œã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ `Ok` result ã§åŒ…ã‚“ã§è¿”ã™ `getMessage` é–¢æ•°ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚`messageId` ãŒç„¡åŠ¹ãªå ´åˆã€ã“ã®é–¢æ•°ã¯ `Err` result ã§ãƒ©ãƒƒãƒ—ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™ã¹ãã§ã™ã€‚ 
```motoko
getMessage: shared query (messageId: Nat) -> async Result.Result<Message, Text>;
```
6. Implement the `updateMessage` function, which accepts a `messageId` of type `Nat` and a content `c` of type `Content`. This function updates the content of the corresponding message only if the caller is the creator of the message. If the `messageId` is invalid or the `caller` is not the creator, the function should return an error message wrapped in an `Err` result. If the update is successful, the function should return a unit value wrapped in an `Ok` result.  
`Nat` å‹ã® `messageId` ã¨ `Content` å‹ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ `c` ã‚’å—ã‘å–ã‚‹ `updateMessage` é–¢æ•°ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚ã“ã®é–¢æ•°ã¯ã€å‘¼ã³å‡ºã—å…ƒãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä½œæˆè€…ã§ã‚ã‚‹å ´åˆã«ã®ã¿ã€å¯¾å¿œã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã‚’æ›´æ–°ã—ã¾ã™ã€‚`messageId` ãŒç„¡åŠ¹ãªå ´åˆã€ã¾ãŸã¯ `caller` ãŒä½œæˆè€…ã§ãªã„å ´åˆã€ã“ã®é–¢æ•°ã¯ `Err` result ã«åŒ…ã¾ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ›´æ–°ãŒæˆåŠŸã—ãŸå ´åˆã€ã“ã®é–¢æ•°ã¯ `Ok` result ã«åŒ…ã¾ã‚ŒãŸãƒ¦ãƒ‹ãƒƒãƒˆå€¤ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ 
```motoko
updateMessage: shared (messageId : Nat, c : Content) -> async Result.Result<(), Text>;
```
7. Implement the `deleteMessage` function, which accepts a `messageId` of type `Nat`, removes the corresponding message from the wall, and returns a unit value wrapped in an `Ok` result. If the `messageId` is invalid, the function should return an error message wrapped in an `Err` result.  
`deleteMessage`é–¢æ•°ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚ã“ã®é–¢æ•°ã¯ `Nat` å‹ã® `messageId` ã‚’å—ã‘å–ã‚Šã€å¯¾å¿œã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¦ã‚©ãƒ¼ãƒ«ã‹ã‚‰å‰Šé™¤ã—ã€`Ok` result ã«åŒ…ã¾ã‚ŒãŸ unit å€¤ã‚’è¿”ã—ã¾ã™ã€‚ã‚‚ã— `messageId` ãŒç„¡åŠ¹ã§ã‚ã‚Œã°ã€ã“ã®é–¢æ•°ã¯ `Err` result ã«åŒ…ã¾ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã•ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
```motoko
deleteMessage: shared (messageId : Nat) -> async Result.Result<(), Text>;
```
8. Implement the `upVote` function, which accepts a `messageId` of type `Nat`, increments the vote count of the corresponding message by one, and returns a unit value wrapped in an `Ok` result. If the `messageId` is invalid, the function should return an error message wrapped in an `Err` result.  

`Nat`å‹ã® `messageId` ã‚’å—ã‘å–ã‚Šã€å¯¾å¿œã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æŠ•ç¥¨æ•°ã‚’1ã¤å¢—ã‚„ã—ã€`Ok` result ã«åŒ…ã¾ã‚ŒãŸ unit å€¤ã‚’è¿”ã™ `upVote` é–¢æ•°ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚`messageId` ãŒç„¡åŠ¹ãªå ´åˆã€ã“ã®é–¢æ•°ã¯ `Err` result ã§ãƒ©ãƒƒãƒ—ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™ã¹ãã§ã™ã€‚ 
```motoko
upVote: shared (messageId  : Nat) -> async Result.Result<(), Text>;
```
9. Implement the `downVote` function, which accepts a `messageId` of type `Nat`, decrements the vote count of the corresponding message by one, and returns a unit value wrapped in an `Ok` result. If the `messageId` is invalid, the function should return an error message wrapped in an `Err` result.  
ã“ã®é–¢æ•°ã¯ `Nat` å‹ã® `messageId` ã‚’å—ã‘å–ã‚Šã€å¯¾å¿œã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æŠ•ç¥¨æ•°ã‚’ 1 ã¤æ¸›ã‚‰ã—ã€`Ok` result ã«åŒ…ã¾ã‚ŒãŸ unit å€¤ã‚’è¿”ã—ã¾ã™ã€‚ã‚‚ã— `messageId` ãŒç„¡åŠ¹ã§ã‚ã‚Œã°ã€ã“ã®é–¢æ•°ã¯ `Err` result ã«åŒ…ã¾ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
```motoko
downVote: shared (messageId  : Nat) -> async Result.Result<(), Text>;
```
10. Implement the query function `getAllMessages`, which returns a list of all messages stored in the wall.  
ã‚¦ã‚©ãƒ¼ãƒ«ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆã‚’è¿”ã™ã‚¯ã‚¨ãƒªãƒ¼é–¢æ•° `getAllMessages` ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚
```motoko
getAllMessages : query () -> async [Message];
```
11. Implement the query function `getAllMessagesRanked`, which returns a list of all messages from the wall, ordered by the number of votes in descending order.  
ã‚¯ã‚¨ãƒªãƒ¼é–¢æ•° `getAllMessagesRanked` ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚ã“ã®é–¢æ•°ã¯ã€ã‚¦ã‚©ãƒ¼ãƒ«ã‹ã‚‰ã®ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆã‚’æŠ•ç¥¨æ•°ã®é™é †ã§è¿”ã—ã¾ã™ã€‚
```motoko
getAllMessagesRanked : query () -> async [Message];
```
12. Deploy the student wall on the Internet Computer. / Internet Computer ã«ç”Ÿå¾’ç”¨ã‚¦ã‚©ãƒ¼ãƒ«ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãªã•ã„ã€‚

## ğŸ“º Interface / ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹
Your canister should implement the following interface:  
ã‚­ãƒ£ãƒ‹ã‚¹ã‚¿ãƒ¼ã¯ã€ä»¥ä¸‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š
```motoko
actor {
   
    // Add a new message to the wall
    writeMessage: shared (c : Content) -> async Nat;

    //Get a specific message by ID
    getMessage: shared query (messageId : Nat) -> async Result.Result<Message, Text>;

    // Update the content for a specific message by ID
    updateMessage: shared (messageId : Nat, c : Content) -> async Result.Result<(), Text>;

    //Delete a specific message by ID
    deleteMessage: shared (messageId : Nat) -> async Result.Result<(), Text>;

    // Voting
    upVote: shared (messageId  : Nat) -> async Result.Result<(), Text>;
    downVote: shared (messageId  : Nat) -> async Result.Result<(), Text>;

    //Get all messages
    getAllMessages : query () -> async [Message];

    //Get all messages
    getAllMessagesRanked : query () -> async [Message];
};
```